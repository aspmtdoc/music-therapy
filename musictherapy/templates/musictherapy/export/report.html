{% extends "easy_pdf/base.html" %}
{% load template_getattr %}

{% block layout_style %}
    <style type="text/css">
        @page {
            size: {{ pagesize|default:"A4" }};
            margin-left: 2.5cm;
            margin-right: 2.5cm;
            margin-top: 3cm;
            margin-bottom: 2cm;

            @frame header {
                -pdf-frame-content: page-header;
                margin-top: 1.2cm;
                margin-right: 1.2cm;
                margin-bottom: 1.2cm;
                margin-left: 1.2cm;
            }
        }
    </style>
{% endblock %}

{% block extra_style %}
    <style type="text/css">
        .tab {
            margin: 0 0 0 40px;
        }

        .right-space {
            margin: 0 10px 0 0;
        }

        .signature-border {
            border-top: solid;
            border-color: black;
            padding-top: 0.5cm;
        }

        .right {
            text-align: right;
        }

        #signature {
            margin-top: 1cm;
        }
    </style>
{% endblock %}

{% block page_header %}
<div id="page-header">
    <div class="header">
        <div class="tab">
        </div>
    </div>
</div>
{% endblock %}


{% block content %}
    <div id="content">
        <div class="main">
            <h1 style="text-align:center">Alzhemier Society Peel's Music Therapy Monthly Report</h1>

            <h2>{{userinfo.name}} - {{date|date:"F"}} {{date.year}}</h2>

            <div id="goals">
                {% for domain, data in goals.items %}
                    <h4>{{domain}}</h4>
                    {% for goal, objective in data.items %}
                        {{goal.name}}<br>
                        <div class="tab">
                            {% for obj in objective %}
                                {{ obj.name }}<br>
                            {% endfor %}
                        </div>
                    {% endfor %}
                {% endfor %}
            </div>

            <div id="graphs">
                <h4>Monthly Graphs</h4>
                {% for domain, chart in graphs.items %}
                    {% if chart %}
                    <img src="data:image/png;base64,{{chart}}"/>
                    {% endif %}
                {% endfor %}
            </div>

            <div id="notes">
                <h4>Notes</h4>
                {% for domain, note in notes.items %}
                    {% for n in note %}
                        <p>{{n.note}}</p>
                    {% endfor %}
                {% endfor %}
            </div>

            <div id="signature">
                <h3 class="signature-border">Music Therapist Signature:</h3>
                <p class="right">Date: {{ today }}</p>
                <h3 style="margin-top: 40px">Prime Program Woker Signature:</h3>
                <p class="right">Date: {{ today }}</p></p>
            </div>
        </div>
    </div>
{% endblock %}}